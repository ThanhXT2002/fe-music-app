<ion-header [translucent]="true" mode="ios">
  <ion-toolbar >
    <ion-buttons slot="start" >
     <ion-button (click)="onBack()">
      <i class="fa-solid fa-chevron-left fa-lg"></i>
     </ion-button>
    </ion-buttons>
    <ion-title>
      <span class="text-xl">Chỉnh sửa Playlist</span>
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="bg-black">
  <div class="px-4 mt-2 sticky top-0 z-10 ">
    <div class="relative my-4">
      <input
        id="searchInput"
        type="text"
        [(ngModel)]="searchQuery"
        (input)="onSearchInput($event)"
        placeholder="Tìm kiếm theo tên, tác giả hoặc từ khóa..."
        class="input w-full pl-4 pr-10 bg-gray-700"
      />
      <button *ngIf="searchQuery.length > 0"
        (click)="clearSearch()"
        class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 disabled:opacity-50"
      >
         <i class="fa-solid fa-close  text-gray-400"></i>
      </button>
    </div>
  </div>
  <div *ngIf="isLoading" class="ion-padding">Đang tải danh sách bài hát...</div>
  <ion-list *ngIf="!isLoading" class="0">
    <ion-item *ngFor="let song of filteredSongs; let i = index" class="w-full">
      <div class="w-full ">
        <app-song-item
          [song]="song"
          [index]="i"
          [checked]="isSelected(song.id)"
          (checkedChange)="onSongCheckboxChange(song.id, $event)"
          [playlist]="allSongs"
          [modePage]="'edit-playlist'"
          [showAlbum]="true"
          [showArtist]="true"
          (play)="null"
        >
        </app-song-item>
      </div>
    </ion-item>
  </ion-list>
</ion-content>
